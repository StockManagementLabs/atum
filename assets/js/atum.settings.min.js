!function(c,t,e,n){"use strict";var s="atumSettings",i={};function a(t,e){this.$settingsWrapper=c(t),this.$nav=this.$settingsWrapper.find(".atum-nav"),this.$form=this.$settingsWrapper.find("#atum-settings"),this.settings=c.extend({},i,atumSettingsVars||{},e||{}),this._defaults=i,this._name=s,this.init()}function o(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}c.extend(a.prototype,{navigationReady:!1,numHashParameters:0,init:function(){var i=this;this.setupNavigation(),this.doSwitchers(),this.doColorPickers(),this.doSelect2(),this.toggleMenu(),c(t).on("load",function(){c(".footer-box").hasClass("no-style")&&(c("#wpfooter").css("position","relative").show(),c("#wpcontent").css("min-height","95vh"))}),c(".js-switch-menu").on("change",function(){i.changeMenuTheme()}),this.$form.on("change","input, select, textarea",function(){c(".atum-nav-link.active").parent().hasClass("no-submit")||c(this).addClass("dirty")}).on("change","#atum_out_stock_threshold",function(){c(this).is(":checked")&&i.settings.isAnyOutStockThresholdSet?swal({title:i.settings.areYouSure,text:i.settings.outStockThresholdSetClearText,type:"question",showCancelButton:!0,confirmButtonText:i.settings.startFresh,cancelButtonText:i.settings.cancel,reverseButtons:!0,allowOutsideClick:!1,showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(e,n){var t={action:i.settings.outStockThresholdSetClearScript,token:i.settings.runnerNonce};c.ajax({url:ajaxurl,method:"POST",dataType:"json",data:t,success:function(t){!0===t.success?e(t.data):n(t.data)}})})}}).then(function(t){swal({title:i.settings.done,type:"success",text:t,confirmButtonText:i.settings.ok})}).catch(swal.noop):this.checked||swal({title:i.settings.areYouSure,text:i.settings.outStockThresholdDisable,type:"info"})}).on("click","input[type=submit]",function(){i.$form.find(".dirty").removeClass("dirty"),i.$form.find(".form-settings-wrapper").addClass("overlay")}).on("click",".script-runner .tool-runner",function(){i.runScript(c(this))}).on("change","[data-dependency]",function(){var n=c(this),s=n.val(),t=n.data("dependency");c.isArray(t)?c.each(t,function(t,e){i.checkDependency(n,e,s)}):i.checkDependency(n,t,s)}).find("[data-dependency]").each(function(){c(this).change().removeClass("dirty")}),c(t).bind("beforeunload",function(){if(i.$form.find(".dirty").length){if(navigator.userAgent.toLowerCase().match(/msie|chrome/)){if(t.aysHasPrompted)return;t.aysHasPrompted=!0,t.setTimeout(function(){t.aysHasPrompted=!1},900)}return!1}})},doSwitchers:function(){c(".js-switch").each(function(){new Switchery(this,{size:"small",color:"#d5f5ba",secondaryColor:"#e9ecef",jackColor:"#69c61d",jackSecondaryColor:"#adb5bd"})}),c(".js-switch-menu").each(function(){0===c(".switch-interface-style .switchery").length&&new Switchery(this,{size:"small",color:"#dbf9ff",secondaryColor:"#e9ecef",jackColor:"#00b8db",jackSecondaryColor:"#adb5bd"})})},doColorPickers:function(){var e=this;c(".wp-color-result-text");c(".atum-color").each(function(t){c(this).wpColorPicker({change:function(t,e){var n=c(this).val();c(".wp-picker-active .color-picker-preview").css("background-color",n),c(".wp-picker-active .wp-color-result-text").html(n)}})}),c(".wp-color-result").prepend('<span class="color-picker-preview"></span>'),c(".wp-picker-container").each(function(){var t=c(this).find(".atum-color").val();t?(c(this).find(".color-picker-preview").css("background-color",t),c(this).find(".wp-color-result-text").html(t)):(c(this).find(".color-picker-preview").css("background-color",t),c(this).find(".wp-color-result-text").html(e.settings.selectColor))})},doSelect2:function(){"function"==typeof c.fn.select2&&c(".atum-select2").each(function(){var t=c(this);t.hasClass("atum-select-multiple")&&!1===t.prop("multiple")&&t.prop("multiple",!0),t.select2({minimumResultsForSearch:20,containerCssClass:"atum-select2"}).on("select2:selecting",function(){var t=c(this),n=t.val();c.isArray(n)&&-1<c.inArray("",n)&&(c.each(n,function(t,e){""===e&&n.splice(t,1)}),t.val(n))});var e=t.siblings(".select2-container").not(".atum-select2, .atum-enhanced-select");e.length&&e.addClass("atum-select2")})},changeMenuTheme:function(){c(".atum-nav").toggleClass("atum-nav-light"),c(".section-general-title").toggleClass("section-general-title-light"),c(".section-title").toggleClass("section-title-light"),c(".section-fields").toggleClass("section-field-light"),c(".switch-interface-style").toggleClass("bg-light"),c.ajax({url:ajaxurl,method:"POST",data:{token:this.settings.menuThemeNonce,action:this.settings.changeSettingsMenuStyle,theme:c(".js-switch-menu").is(":checked")?1:0}})},toggleMenu:function(){c(".toogle-menu").click(function(){c(".atum-nav-list").toggleClass("expand-menu")}),c(".atum-nav-link").click(function(){c(".atum-nav-list").toggleClass("expand-menu")}),c(t).resize(function(){c(".atum-nav-list").removeClass("expand-menu")})},restoreSelects:function(){c(".select2-container--open").remove(),this.doSelect2()},setupNavigation:function(){if(void 0!==c.address){var s=this;c.address.change(function(t){var e=c.address.pathNames(),n=e.length;!0!==s.navigationReady||!n&&s.numHashParameters===n||s.clickTab(e[0]),s.navigationReady=!0}).init(function(){var t=c.address.pathNames();t.length?s.clickTab(t[0]):s.$form.show();var e=location.search.substr(1),n={};e.split("&").forEach(function(t){var e=t.split("=");n[e[0]]=decodeURIComponent(e[1])}),n.hasOwnProperty("tab")&&s.$settingsWrapper.trigger("atum-settings-page-loaded",[n.tab])})}},clickTab:function(t){var e=this,n=this.$nav.find('.atum-nav-link[data-tab="'+t+'"]');this.$form.find(".dirty").length?swal({title:this.settings.areYouSure,text:this.settings.unsavedData,type:"warning",showCancelButton:!0,confirmButtonText:this.settings.continue,cancelButtonText:this.settings.cancel,reverseButtons:!0,allowOutsideClick:!1}).then(function(){e.moveToTab(n)},function(t){n.blur()}):e.moveToTab(n)},moveToTab:function(e){var n=this,t=this.$form.find(".form-settings-wrapper");this.$nav.find(".atum-nav-link.active").not(e).removeClass("active"),e.addClass("active"),t.addClass("overlay"),this.$form.load(e.attr("href")+" .form-settings-wrapper",function(){n.doSwitchers(),n.doColorPickers(),n.restoreSelects(),n.$form.find("[data-dependency]").change().removeClass("dirty"),n.$form.show();var t=n.$form.find("input:submit");e.parent().hasClass("no-submit")?t.hide():t.show(),n.$settingsWrapper.trigger("atum-settings-page-loaded",[e.data("tab")])})},runScript:function(i){var a=this,o=i.closest(".script-runner");swal({title:this.settings.areYouSure,text:o.data("confirm"),type:"warning",showCancelButton:!0,confirmButtonText:this.settings.run,cancelButtonText:this.settings.cancel,reverseButtons:!0,allowOutsideClick:!1,showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(e,n){var t=o.find("#"+o.data("input")),s={action:o.data("action"),token:a.settings.runnerNonce};t.length&&(s.option=t.val()),c.ajax({url:ajaxurl,method:"POST",dataType:"json",data:s,beforeSend:function(){i.prop("disabled",!0)},success:function(t){i.prop("disabled",!1),!0===t.success?e(t.data):n(t.data)}})})}}).then(function(t){swal({title:a.settings.done,type:"success",text:t,confirmButtonText:a.settings.ok}).then(function(){a.$settingsWrapper.trigger("atum-settings-script-runner-done",[o])})}).catch(swal.noop)},checkDependency:function(t,e,n){var s,i,a;if((!t.is(":radio")||t.is(":checked"))&&(a=t.is(":checkbox")||t.is(":radio")?n===e.value&&t.is(":checked")||n!==e.value&&!t.is(":checked"):n===e.value,e.hasOwnProperty("section")?i=this.$form.find('[data-section="'+e.section+'"]'):e.hasOwnProperty("field")&&(s=c("#"+this.settings.atumPrefix+e.field)).length&&(i=s.closest("tr").find("th, td")),void 0!==i&&i.length))if(!0===a)e.hasOwnProperty("animated")&&!0!==e.animated?i.show():i.slideDown("fast");else if(e.hasOwnProperty("animated")&&!0!==e.animated?i.hide():i.slideUp("fast"),e.hasOwnProperty("resetDefault")&&!0===e.resetDefault){var o=s.data("default"),r=s.val();s.is(":radio")||s.is(":checkbox")?s.prop("checked",o===r):s.val(o),s.change()}}}),c.fn[s]=function(t){return this.each(function(){c.data(this,"plugin_"+s)||c.data(this,"plugin_"+s,new a(this,t))})},c(function(){c(".atum-settings-wrapper").atumSettings()});var r,l,u,h,d,f,g,p,m,v;l="button",h="."+(u="bs.button"),d=".data-api",f=(r=c).fn[l],g="active",p='[data-toggle^="button"]',m={CLICK_DATA_API:"click"+h+d,FOCUS_BLUR_DATA_API:"focus"+h+d+" blur"+h+d},v=function(){function n(t){this._element=t}var t,e,s,i=n.prototype;return i.toggle=function(){var t=!0,e=!0,n=r(this._element).closest('[data-toggle="buttons"]')[0];if(n){var s=r(this._element).find("input")[0];if(s){if("radio"===s.type)if(s.checked&&r(this._element).hasClass(g))t=!1;else{var i=r(n).find(".active")[0];i&&r(i).removeClass(g)}if(t){if(s.hasAttribute("disabled")||n.hasAttribute("disabled")||s.classList.contains("disabled")||n.classList.contains("disabled"))return;s.checked=!r(this._element).hasClass(g),r(s).trigger("change")}s.focus(),e=!1}}e&&this._element.setAttribute("aria-pressed",!r(this._element).hasClass(g)),t&&r(this._element).toggleClass(g)},i.dispose=function(){r.removeData(this._element,u),this._element=null},n._jQueryInterface=function(e){return this.each(function(){var t=r(this).data(u);t||(t=new n(this),r(this).data(u,t)),"toggle"===e&&t[e]()})},t=n,s=[{key:"VERSION",get:function(){return"4.1.1"}}],(e=null)&&o(t.prototype,e),s&&o(t,s),n}(),r(e).on(m.CLICK_DATA_API,p,function(t){t.preventDefault();var e=t.target;r(e).hasClass("btn")||(e=r(e).closest(".btn")),v._jQueryInterface.call(r(e),"toggle")}).on(m.FOCUS_BLUR_DATA_API,p,function(t){var e=r(t.target).closest(".btn")[0];r(e).toggleClass("focus",/^focus(in)?$/.test(t.type))}),r.fn[l]=v._jQueryInterface,r.fn[l].Constructor=v,r.fn[l].noConflict=function(){return r.fn[l]=f,v._jQueryInterface}}(jQuery,window,document);