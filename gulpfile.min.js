var gulp=require("gulp"),plumber=require("gulp-plumber"),gulpif=require("gulp-if"),watch=require("gulp-watch"),livereload=require("gulp-livereload"),notify=require("gulp-notify"),wrap=require("gulp-wrap"),autoprefix=require("gulp-autoprefixer"),sass=require("gulp-sass"),sourcemaps=require("gulp-sourcemaps"),composer=require("gulp-composer"),filter=require("gulp-filter");var version="1.5.0",curDate=new Date;var config={assetsDir:"./assets",devUrl:"http://atum.loc",production:false,decorate:{templateCSS:["/** \n"," * ATUM Inventory Management for WooCommerce CSS \n"," * @version "+version+" \n"," * @author Be Rebel  \n"," *\n"," * Author URI: https://berebel.io \n"," * License : Â©"+curDate.getFullYear()+" Stock Management Labs \n"," */\n","\n <%= contents %>"].join("")}};var enabled={rev:config.production,maps:!config.production,failStyleTask:config.production};var onError=function(err){console.log("An error occured:",err.message);this.emit("end")};var options={sass:{errLogToConsole:!enabled.failStyleTask,outputStyle:!config.production?"expanded":"compressed",includePaths:[".",config.assetsDir+"/scss"]}};gulp.task("sass::atum",function(){var destDir=config.assetsDir+"/css";return gulp.src([config.assetsDir+"/scss/*.scss"]).pipe(plumber({errorHandler:onError})).pipe(gulpif(enabled.maps,sourcemaps.init())).pipe(sass(options.sass)).pipe(autoprefix("last 2 version")).pipe(wrap(config.decorate.templateCSS)).pipe(gulpif(enabled.maps,sourcemaps.write(".",{sourceRoot:"assets/scss/"}))).pipe(gulp.dest(destDir)).pipe(notify({message:"sass task complete"})).pipe(filter("**/*.css")).pipe(livereload())});gulp.task("composer::install",function(){composer({cwd:".",o:true})});gulp.task("composer::update",function(){composer("update",{cwd:".",o:true})});gulp.task("composer::optimize",function(){composer("dumpautoload",{cwd:".",optimize:true})});gulp.task("watch::atum",function(){livereload.listen();gulp.watch(config.assetsDir+"/scss/**/*.scss",["sass::atum"]);gulp.watch(["./**/*.php",config.assetsDir+"/js/**/*.js",config.assetsDir+"/images/**/*","!"+config.assetsDir+"/js/**/*.min.js","!node_modules"]).on("change",function(file){livereload.changed(file)})});gulp.task("default",["sass::atum"],function(){});